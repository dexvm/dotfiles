#!{{ lookPath "bash" }}

echo '
  ___ ___  __  __ ___ _    ___ _____ ___ ___  _  _ ___ 
 / __/ _ \|  \/  | _ \ |  | __|_   _|_ _/ _ \| \| / __|
| (_| (_) | |\/| |  _/ |__| _|  | |  | | (_) | .` \__ \
 \___\___/|_|  |_|_| |____|___| |_| |___\___/|_|\_|___/
'

# fish
if [ -d ~/.config/fish/completions ]; then
  {{- if lookPath "chezmoi" }}
    # {{ output "chezmoi" "--version" | sha256sum }}
    chezmoi completion fish --output ~/.config/fish/completions/chezmoi.fish
  {{- end }}

  {{- if lookPath "flux" }}
    # {{ output "flux" "--version" | sha256sum }}
    flux completion fish > ~/.config/fish/completions/flux.fish
  {{- end }}

  {{- if lookPath "helm" }}
    # {{ output "helm" "version" | sha256sum }}
    helm completion fish > ~/.config/fish/completions/helm.fish
  {{- end }}

  {{- if lookPath "kustomize" }}
    # {{ output "kustomize" "version" | sha256sum }}
    kustomize completion fish > ~/.config/fish/completions/kustomize.fish
  {{- end }}

  {{- if lookPath "velero" }}
    # {{ output "velero" "version" "--client-only" | sha256sum }}
    velero completion fish > ~/.config/fish/completions/velero.fish
  {{- end }}

  {{- if lookPath "kubectl" }}
    # {{ output "kubectl" "version" "--client=true" | sha256sum }}
    kubectl completion fish > ~/.config/fish/completions/kubectl.fish
  {{- end }}

  {{- if lookPath "stern" }}
    # {{ output "stern" "--version" | sha256sum }}
    stern --completion fish > ~/.config/fish/completions/stern.fish
  {{- end }}

  {{- if lookPath "kubie" }}
    # {{ output "kubie" "--version" | sha256sum }}
    curl -L https://raw.githubusercontent.com/sbstp/kubie/master/completion/kubie.fish -o ~/.config/fish/completions/kubie.fish
  {{- end }}
fi
